<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sqisoft.com.mapper.DevMapper">

	<resultMap type="sqisoft.com.model.DevInfo" id="devInfoMap">
		<id column="DEV_SEQ" property="devSeq" />
		<id column="SVC_CD" property="svcCd" />
		<id column="SITE_SEQ" property="siteSeq" />		
		<id column="INSTL_AREA" property="instlArea" />
		<id column="INSTL_CNT" property="instlCnt" />
		<id column="INSTL_TOD" property="instlTod" />
		<id column="INSTL_PLAC" property="instlPlac" />
		<id column="MODEL_SEQ" property="modelSeq" />
		<id column="UP_DEV_SEQ" property="upDevSeq" />
		<id column="DEV_NM" property="devNm" />		
	</resultMap>
	
	<!-- 공통코드 리스트 조회 -->
	<select id="selectDevList" parameterType="map" resultMap="devInfoMap">
	    SELECT DEV_SEQ,
				   SVC_CD,
				   SITE_SEQ,
				   INSTL_AREA,
				   INSTL_CNT,
				   INSTL_TOD,
				   INSTL_PLAC,
				   MODEL_SEQ,
				   UP_DEV_SEQ,
				   DEV_NM
			FROM REMS.DEV_INF
			WHERE 1=1 
			<choose>
				<when test="sites != null and sites.size != 0">
					AND SITE_SEQ IN 
					<foreach collection="sites" item="item"  open="(" close=")" separator=",">
						#{item}
					</foreach>					
				</when>
				<otherwise>
					AND SITE_SEQ IN (-99)
				</otherwise>
			</choose>
			
			ORDER BY SITE_SEQ, DEV_SEQ
	</select>
		
</mapper>